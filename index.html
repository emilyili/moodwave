<!DOCTYPE html>
<style>

  .title {  
    font-family: Montserrat;
    font-style: normal;
    font-weight: bold;
    font-size: 20px;
    line-height: 24px;
    fill: #FFFFFF;
  }
  .heading {
   font-family: Montserrat;
   font-style: normal;
   font-weight: bold;
   font-size: 12px;
   line-height: 15px;
   fill: #FFFFFF;
  }
  .body {
    font-family: Montserrat;
    font-style: normal;
    font-weight: normal;
    font-size: 12px;
    line-height: 15px;
    fill: #FFFFFF;
    overflow: hidden;
  }
  
body {
  font-family: 'Open Sans', sans-serif;
}

div#layout {
  text-align: center;
}

div#container {
  width: 100%;
  height: 800px;
  margin: auto;
  background-color: #34383A;
}

svg {
  width: 100%;
  height: 100%;
}

.bar {
  fill: #80cbc4;
}

text {
  font-size: 12px;
  fill: #fff;
}

path {
  stroke: gray;
}

line {
  stroke: gray;
}

line#limit {
  stroke: #FED966;
  stroke-width: 3;
  stroke-dasharray: 3 6;
}

.grid path {
  stroke-width: 0;
}

.grid .tick line {
  stroke: #9FAAAE;
  stroke-opacity: 0.3;
}

text.divergence {
  font-size: 14px;
  fill: #2F4A6D;
}

text.value {
  font-size: 14px;
}

text.title {
  font-size: 22px;
  font-weight: 600;
}

text.label {
  font-size: 14px;
  font-weight: 400;
}

text.source {
  font-size: 10px;
}
</style>

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<body>
  <div id='layout'>
    <!-- <h2>Bar chart example</h2> -->
    <div id='container'>
      <svg/>
    </div>
    <!-- Add a svg area, empty -->
<!-- <svg id="dataviz_area" height=1000 width=100%></svg> -->
  </div>

</body>
</html>
<script>
// 	const width = 1000;
// 	const height = 600;
// 	const margin = ({top: 30, right: -100, bottom: -50, left: 250})
// //   const svg = d3.create("svg")
// //     .attr("viewBox", [0, 0, width + 100, height + 100])


const margin = 10;
const width = 1400 - 2 * margin;
const height = 800 - 2 * margin;
	
const svg = d3.select('svg');
const svgContainer = d3.select('#container');
	
//   var svg = d3.select("#dataviz_area")
  
//   svg.append("rect")
//     .attr("width", "100%")
//     .attr("height", "100%")
//     .attr("fill", "#34383A");
	
//   var dataset = [{"date":"2020-12-02T05:00:00.000Z","frequency":49,"topsongs":[{"singer":"Justin Bieber","name":"Confirmation","songFrequency":3},{"singer":"Justin Bieber","name":"That's What Love Is","songFrequency":3},{"singer":"Justin Bieber","name":"E.T.A.","songFrequency":3},{"singer":"Justin Bieber","name":"At Least for Now","songFrequency":2},{"singer":"Justin Bieber","name":"Second Emotion (feat. Travis Scott)","songFrequency":2},{"singer":"Justin Bieber","name":"All Around Me","songFrequency":2},{"singer":"Justin Bieber","name":"Habitual","songFrequency":2},{"singer":"Isaac Dunbar","name":"scorton's creek - re-imagined by filous","songFrequency":2},{"singer":"Juice WRLD","name":"Wishing Well","songFrequency":2},{"singer":"Marc E. Bassy","name":"NASCAR","songFrequency":2},{"singer":"Justin Bieber","name":"Come Around Me","songFrequency":2},{"singer":"L'Impératrice","name":"Sonate Pacifique","songFrequency":2},{"singer":"Juice WRLD","name":"Stay High","songFrequency":2},{"singer":"Justin Bieber","name":"Running Over (feat. Lil Dicky)","songFrequency":1},{"singer":"Justin Bieber","name":"Forever (feat. Post Malone & Clever)","songFrequency":1},{"singer":"Justin Bieber","name":"Available","songFrequency":1},{"singer":"Ryan Woods","name":"Bad Texter","songFrequency":1},{"singer":"Hippie Sabotage","name":"WRONG TIME","songFrequency":1},{"singer":"Gentle Bones","name":"I Wouldn't Know Any Better Than You","songFrequency":1},{"singer":"Keshi","name":"skeletons","songFrequency":1},{"singer":"H.E.R.","name":"Best Part (feat. Daniel Caesar)","songFrequency":1},{"singer":"Sabrina Claudio","name":"Belong to You (feat. 6LACK)","songFrequency":1},{"singer":"Summer Walker","name":"Stretch You Out (feat. A Boogie Wit da Hoodie)","songFrequency":1},{"singer":"Summer Walker","name":"Girls Need Love (with Drake) - Remix","songFrequency":1},{"singer":"BIGBABYGUCCI","name":"Drop Top Lexus","songFrequency":1},{"singer":"Dominic Fike","name":"Politics & Violence","songFrequency":1},{"singer":"Cigarettes After Sex","name":"Sunsetz","songFrequency":1},{"singer":"masego","name":"Tadow","songFrequency":1},{"singer":"Omar Apollo","name":"I'm Amazing","songFrequency":1},{"singer":"Sufjan Stevens","name":"Mystery of Love","songFrequency":1},{"singer":"PARTYNEXTDOOR","name":"NEVER AGAIN","songFrequency":1},{"singer":"Jakob Ogawa","name":"You Might Be Sleeping","songFrequency":1},{"singer":"BIGBABYGUCCI","name":"Mark Of The Beast","songFrequency":1}]},{"date":"2020-12-03T05:00:00.000Z","frequency":107,"topsongs":[{"singer":"Justin Bieber","name":"E.T.A.","songFrequency":6},{"singer":"Justin Bieber","name":"Forever (feat. Post Malone & Clever)","songFrequency":6},{"singer":"Justin Bieber","name":"Yummy - Summer Walker Remix","songFrequency":6},{"singer":"Justin Bieber","name":"Available","songFrequency":6},{"singer":"Justin Bieber","name":"That's What Love Is","songFrequency":6},{"singer":"Justin Bieber","name":"Confirmation","songFrequency":5},{"singer":"Justin Bieber","name":"Changes","songFrequency":5},{"singer":"Justin Bieber","name":"Intentions (feat. Quavo)","songFrequency":5},{"singer":"Justin Bieber","name":"Habitual","songFrequency":5},{"singer":"Kiana Ledé","name":"Wicked Games","songFrequency":5},{"singer":"Omar Apollo","name":"Hit Me Up","songFrequency":5},{"singer":"Isaac Dunbar","name":"scorton's creek - re-imagined by filous","songFrequency":5},{"singer":"Juice WRLD","name":"Wishing Well","songFrequency":5},{"singer":"Marc E. Bassy","name":"NASCAR","songFrequency":5},{"singer":"Justin Bieber","name":"All Around Me","songFrequency":5},{"singer":"Justin Bieber","name":"At Least for Now","songFrequency":5},{"singer":"Justin Bieber","name":"Take It Out on Me","songFrequency":5},{"singer":"Justin Bieber","name":"Running Over (feat. Lil Dicky)","songFrequency":5},{"singer":"Justin Bieber","name":"Yummy","songFrequency":5},{"singer":"Justin Bieber","name":"Second Emotion (feat. Travis Scott)","songFrequency":5},{"singer":"PARTYNEXTDOOR","name":"Break from Toronto","songFrequency":1},{"singer":"PARTYNEXTDOOR","name":"NEVER AGAIN","songFrequency":1}]},{"date":"2020-12-04T05:00:00.000Z","frequency":110,"topsongs":[{"singer":"Joyce Wrice","name":"That's On You","songFrequency":14},{"singer":"Juice WRLD","name":"Wishing Well","songFrequency":14},{"singer":"Marc E. Bassy","name":"NASCAR","songFrequency":14},{"singer":"Kiana Ledé","name":"Wicked Games","songFrequency":14},{"singer":"Justin Bieber","name":"Confirmation","songFrequency":13},{"singer":"Alextbh","name":"Stoop So Low","songFrequency":13},{"singer":"Omar Apollo","name":"Hit Me Up","songFrequency":13},{"singer":"Isaac Dunbar","name":"scorton's creek - re-imagined by filous","songFrequency":13},{"singer":"Bad Bunny","name":"DÁKITI","songFrequency":2}]},{"date":"2020-12-05T05:00:00.000Z","frequency":55,"topsongs":[{"singer":"Joyce Wrice","name":"That's On You","songFrequency":6},{"singer":"Isaac Dunbar","name":"scorton's creek - re-imagined by filous","songFrequency":6},{"singer":"Bad Bunny","name":"DÁKITI","songFrequency":6},{"singer":"Alextbh","name":"Stoop So Low","songFrequency":6},{"singer":"Gentle Bones","name":"I Wouldn't Know Any Better Than You","songFrequency":6},{"singer":"Juice WRLD","name":"Wishing Well","songFrequency":5},{"singer":"Kiana Ledé","name":"Wicked Games","songFrequency":5},{"singer":"Bad Bunny","name":"YO VISTO ASÍ","songFrequency":5},{"singer":"Marc E. Bassy","name":"NASCAR","songFrequency":5},{"singer":"Justin Bieber","name":"Confirmation","songFrequency":5}]},{"date":"2020-12-06T05:00:00.000Z","frequency":17,"topsongs":[{"singer":"Isaac Dunbar","name":"scorton's creek - re-imagined by filous","songFrequency":2},{"singer":"Justin Bieber","name":"Confirmation","songFrequency":2},{"singer":"Kiana Ledé","name":"Wicked Games","songFrequency":2},{"singer":"Juice WRLD","name":"Wishing Well","songFrequency":2},{"singer":"Justin Bieber","name":"Forever (feat. Post Malone & Clever)","songFrequency":2},{"singer":"Bad Bunny","name":"YO VISTO ASÍ","songFrequency":2},{"singer":"Joyce Wrice","name":"That's On You","songFrequency":2},{"singer":"Omar Apollo","name":"Stayback","songFrequency":2},{"singer":"Between Friends","name":"affection","songFrequency":1}]},{"date":"2020-12-07T05:00:00.000Z","frequency":31,"topsongs":[{"singer":"Clubhouse","name":"Weekend","songFrequency":2},{"singer":"Glass Animals","name":"Heat Waves","songFrequency":2},{"singer":"BabyJake","name":"Confidant","songFrequency":1},{"singer":"Richie Quake","name":"Nothing in My Head","songFrequency":1},{"singer":"SZA","name":"Hit Different","songFrequency":1},{"singer":"$NOT","name":"Moon & Stars (feat. Maggie Lindemann)","songFrequency":1},{"singer":"The 1975","name":"Paris","songFrequency":1},{"singer":"Badgirl$","name":"Click","songFrequency":1},{"singer":"Between Friends","name":"affection","songFrequency":1},{"singer":"SAINt JHN","name":"I Heard You Got Too Litt Last Night","songFrequency":1},{"singer":"Cigarettes After Sex","name":"Don't Let Me Go","songFrequency":1},{"singer":"Kevin Abstract","name":"Peach","songFrequency":1},{"singer":"Aries","name":"SANTA MONICA","songFrequency":1},{"singer":"Sufjan Stevens","name":"Mystery of Love","songFrequency":1},{"singer":"SAFARIO","name":"Pressure Love","songFrequency":1},{"singer":"Playboi Carti","name":"Long Time - Intro","songFrequency":1},{"singer":"Empire of the Sun","name":"Walking on a Dream","songFrequency":1},{"singer":"Omar Apollo","name":"Useless","songFrequency":1},{"singer":"Victoria Monét","name":"Moment","songFrequency":1},{"singer":"Sebastian Paul","name":"LUST DRUNK","songFrequency":1},{"singer":"PARTYNEXTDOOR","name":"NEVER AGAIN","songFrequency":1},{"singer":"Travis Scott","name":"SKELETONS","songFrequency":1},{"singer":"PARTYNEXTDOOR","name":"LOYAL (feat. Drake)","songFrequency":1},{"singer":"Miguel","name":"waves - Tame Impala Remix","songFrequency":1},{"singer":"Khalid","name":"Saturday Nights","songFrequency":1},{"singer":"Victoria Monét","name":"Ass Like That","songFrequency":1},{"singer":"Alina Baraz","name":"More Than Enough","songFrequency":1},{"singer":"Mac Miller","name":"Good News","songFrequency":1},{"singer":"jelani aryeh","name":"Where We Go","songFrequency":1}]}];
	
//   var userData = [{"username":"chinaskixx","date":"2021-03-27T04:00:00.000Z","x":1,"y":1,"quadrant":5,"keywords":"Happy","reflections":""},{"username":"chinaskixx","date":"2021-03-07T05:00:00.000Z","x":-1,"y":-3,"quadrant":3,"keywords":"Tired, Unmotivated, Moody","reflections":""},{"username":"chinaskixx","date":"2021-03-06T05:00:00.000Z","x":-1,"y":-3,"quadrant":3,"keywords":"Tired, Self-concious","reflections":"I had a headache that day and was very unproductive which affected my mood"},{"username":"chinaskixx","date":"2021-03-07T05:00:00.000Z","x":-1,"y":-3,"quadrant":3,"keywords":"Tired, Unmotivated, Moody","reflections":""},{"username":"chinaskixx","date":"2021-03-06T05:00:00.000Z","x":-1,"y":-3,"quadrant":3,"keywords":"Tired, Self-concious","reflections":"I had a headache that day and was very unproductive which affected my mood"},{"username":"chinaskixx","date":"2021-03-09T05:00:00.000Z","x":-1,"y":2,"quadrant":8,"keywords":"Tense, Anxious","reflections":""},{"username":"chinaskixx","date":"2021-03-11T05:00:00.000Z","x":-1,"y":4,"quadrant":4,"keywords":"stressed, restless","reflections":""},{"username":"chinaskixx","date":"2021-03-11T05:00:00.000Z","x":-1,"y":4,"quadrant":4,"keywords":"stressed, restless","reflections":""},{"username":"chinaskixx","date":"2021-03-11T05:00:00.000Z","x":-1,"y":4,"quadrant":4,"keywords":"stressed, restless","reflections":""},{"username":"chinaskixx","date":"2021-03-10T05:00:00.000Z","x":-2,"y":4,"quadrant":4,"keywords":"nervous, tense, anxious, stressed","reflections":""},{"username":"chinaskixx","date":"2021-03-10T05:00:00.000Z","x":-2,"y":4,"quadrant":4,"keywords":"nervous, tense, anxious, stressed","reflections":""},{"username":"chinaskixx","date":"2021-03-30T04:00:00.000Z","x":-3,"y":-1,"quadrant":3,"keywords":"sad, down","reflections":""},{"username":"chinaskixx","date":"2021-03-24T04:00:00.000Z","x":-3,"y":1,"quadrant":4,"keywords":"anxious, stressed","reflections":""},{"username":"chinaskixx","date":"2021-03-24T04:00:00.000Z","x":-3,"y":1,"quadrant":4,"keywords":"anxious, stressed","reflections":""},{"username":"chinaskixx","date":"2021-03-23T04:00:00.000Z","x":0,"y":-2,"quadrant":7,"keywords":"neutral, tired, calm","reflections":""},{"username":"chinaskixx","date":"2021-03-23T04:00:00.000Z","x":0,"y":-2,"quadrant":7,"keywords":"neutral, tired, calm","reflections":""},{"username":"chinaskixx","date":"2021-03-16T04:00:00.000Z","x":1,"y":-2,"quadrant":6,"keywords":"Content, slightly tired but happy","reflections":""},{"username":"chinaskixx","date":"2021-03-16T04:00:00.000Z","x":1,"y":-2,"quadrant":6,"keywords":"Content, slightly tired but happy","reflections":""},{"username":"chinaskixx","date":"2021-03-28T04:00:00.000Z","x":null,"y":null,"quadrant":9,"keywords":"happy, alert","reflections":""},{"username":"chinaskixx","date":"2021-03-22T04:00:00.000Z","x":2,"y":-1,"quadrant":6,"keywords":"content, calm","reflections":""},{"username":"chinaskixx","date":"2021-03-15T04:00:00.000Z","x":2,"y":-1,"quadrant":6,"keywords":"Calm, Content, Happy","reflections":""},{"username":"chinaskixx","date":"2021-03-15T04:00:00.000Z","x":2,"y":-1,"quadrant":6,"keywords":"Calm, Content, Happy","reflections":""},{"username":"chinaskixx","date":"2021-03-18T04:00:00.000Z","x":2,"y":-1,"quadrant":6,"keywords":"Content, not worried, calm","reflections":""},{"username":"chinaskixx","date":"2021-03-13T05:00:00.000Z","x":2,"y":2,"quadrant":5,"keywords":"happy, excited","reflections":""},{"username":"chinaskixx","date":"2021-03-13T05:00:00.000Z","x":2,"y":2,"quadrant":5,"keywords":"happy, excited","reflections":""},{"username":"chinaskixx","date":"2021-03-26T04:00:00.000Z","x":2,"y":2,"quadrant":5,"keywords":"happy, elated)","reflections":""},{"username":"chinaskixx","date":"2021-03-14T05:00:00.000Z","x":3,"y":-1,"quadrant":2,"keywords":"Content, Relaxed, Chilled","reflections":""},{"username":"chinaskixx","date":"2021-03-14T05:00:00.000Z","x":3,"y":-1,"quadrant":2,"keywords":"Content, Relaxed, Chilled","reflections":""},{"username":"chinaskixx","date":"2021-03-31T04:00:00.000Z","x":3,"y":-1,"quadrant":2,"keywords":"content, relaxed","reflections":""},{"username":"chinaskixx","date":"2021-03-08T05:00:00.000Z","x":3,"y":-1,"quadrant":2,"keywords":"Content, at ease","reflections":""},{"username":"chinaskixx","date":"2021-03-12T05:00:00.000Z","x":3,"y":1,"quadrant":1,"keywords":"happy, not worrying","reflections":"Was very productive and felt good because of that"},{"username":"chinaskixx","date":"2021-03-17T04:00:00.000Z","x":3,"y":3,"quadrant":1,"keywords":"happy, excited","reflections":""},{"username":"chinaskixx","date":"2021-03-19T04:00:00.000Z","x":4,"y":1,"quadrant":1,"keywords":"happy, excited, grateful","reflections":""},{"username":"chinaskixx","date":"2021-03-19T04:00:00.000Z","x":4,"y":1,"quadrant":1,"keywords":"happy, excited, grateful","reflections":""},{"username":"chinaskixx","date":"2021-03-29T04:00:00.000Z","x":4,"y":3,"quadrant":1,"keywords":"happy, excited, motivated","reflections":""}];

// //   var dataset = dailyData.sort(function(a,b) {
// //             return a.date - b.date;
// //           })
  
//   //circle chart
//   var pie = d3.pie()
//   var circ = pie([1,1,1,1])
//   var arcOut = d3.arc()
//     .innerRadius(25)
//     .outerRadius(50)
  
//   var arcIn = d3.arc()
//     .innerRadius(3)
//     .outerRadius(25)
  
//   var colorScaleOut = ["#B459DE","#61ECDB","#3372D2","#FD3A3E"]
//   var colorScaleIn = ["#E0BCF0","#B6F6EE","#B0C8ED","#FED2D2"]
  
//   svg.append("circle")
//     .attr("cx", 100)
//     .attr("cy", 145)
//     .attr("r", 3)
//     .attr("fill", "white")
  
//   svg.selectAll("path")
//     .data(circ)
//     .enter()
//     .append("path")
//     .attr("transform", "translate(100,145)")
//     .attr("d", arcIn)
//     .attr("fill", function(d) {
//       return colorScaleIn[d.index];
//     })
  
//   svg.selectAll("path2")
//     .data(circ)
//     .enter()
//     .append("path")
//     .attr("transform", "translate(100,145)")
//     .attr("d", arcOut)
//     .attr("fill", function(d) {
//       return colorScaleOut[d.index];
//     })
  
//   //legend descriptions
//   var tgrp = svg.append("g") 
//     tgrp.append("text")
//       .attr("x", 25)
//       .attr("y", 50)
//       .attr("class", "title")
//       .text("Mood Waves")
//     tgrp.append("rect")
//       .attr("x", 0)
//       .attr("y", 240)
//       .attr("width", 30)
//       .attr("height", 30)
//       .attr("fill", "#FD3A3E")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 250)
//       .attr("class", "heading")
//       .text("tense, nervous,")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 270)
//       .attr("class", "heading")
//       .text("stressed, upset")
//     tgrp.append("rect")
//       .attr("x", 0)
//       .attr("y", 300)
//       .attr("width", 30)
//       .attr("height", 30)
//       .attr("fill", "#B459DE")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 310)
//       .attr("class", "heading")
//       .text("alert, excited,")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 330)
//       .attr("class", "heading")
//       .text("elated, happy")
//     tgrp.append("rect")
//       .attr("x", 0)
//       .attr("y", 360)
//       .attr("width", 30)
//       .attr("height", 30)
//       .attr("fill", "#61ECDB")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 370)
//       .attr("class", "heading")
//       .text("content, serene,")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 390)
//       .attr("class", "heading")
//       .text("relaxed, calm")
//     tgrp.append("rect")
//       .attr("x", 0)
//       .attr("y", 420)
//       .attr("width", 30)
//       .attr("height", 30)
//       .attr("fill", "#3372D2")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 430)
//       .attr("class", "heading")
//       .text("tired, bored,")
//     tgrp.append("text")
//       .attr("x", 60)
//       .attr("y", 450)
//       .attr("class", "heading")
//       .text("depressed, sad")

// https://insights.stackoverflow.com/survey/2018/#technology-most-loved-dreaded-and-wanted-languages
    const sample = [
      {
        language: 'Rust',
        value: 78.9,
        color: '#000000'
      },
      {
        language: 'Kotlin',
        value: 75.1,
        color: '#00a2ee'
      },
      {
        language: 'Python',
        value: 68.0,
        color: '#fbcb39'
      },
      {
        language: 'TypeScript',
        value: 67.0,
        color: '#007bc8'
      },
      {
        language: 'Go',
        value: 65.6,
        color: '#65cedb'
      },
      {
        language: 'Swift',
        value: 65.1,
        color: '#ff6e52'
      },
      {
        language: 'JavaScript',
        value: 61.9,
        color: '#f9de3f'
      },
      {
        language: 'C#',
        value: 60.4,
        color: '#5d2f8e'
      },
      {
        language: 'F#',
        value: 59.6,
        color: '#008fc9'
      },
      {
        language: 'Clojure',
        value: 59.6,
        color: '#507dca'
      }
    ];

    const chart = svg.append('g')
      .attr('transform', `translate(${margin}, ${margin})`);

	const x = d3.scaleBand()
	    .domain(d3.range(dailyData.length))
	    .range([margin.left, width - margin.right])
	    .padding(0.1)

	const y = d3.scaleLinear()
	    .domain([0, d3.max(dailyData, d => d.frequency)]).nice()
	    .range([height - margin.bottom, margin.top])

	const xAxis = g => g
	    .attr("transform", `translate(0,${height - margin.bottom})`)
	    .attr("color", "white")
	    .call(d3.axisBottom(x).tickFormat(i => d3.timeFormat('%B')(new Date(dailyData[i].date))).tickSizeOuter(0))

	const yAxis = g => g
	    .attr("transform", `translate(${margin.left},0)`)
	    .call(d3.axisLeft(y).ticks(null, data.format))
	    .call(g => g.select(".domain").remove())
	    .call(g => g.append("text")
		.attr("x", -margin.left)
		.attr("y", 10)
		.attr("fill", "white")
		.attr("text-anchor", "start")
		.text(dataset.y))

//     const xScale = d3.scaleBand()
//       .range([0, width])
//       .domain(sample.map((s) => s.language))
//       .padding(0.4)
    
//     const yScale = d3.scaleLinear()
//       .range([height, 0])
//       .domain([0, 100]);

    // vertical grid lines
    // const makeXLines = () => d3.axisBottom()
    //   .scale(xScale)

//     const makeYLines = () => d3.axisLeft()
//       .scale(yScale)

    chart.append('g')
      .attr('transform', `translate(0, ${height})`)
      .call(d3.axisBottom(xScale));

    chart.append('g')
      .call(d3.axisLeft(yScale));

    // vertical grid lines
    // chart.append('g')
    //   .attr('class', 'grid')
    //   .attr('transform', `translate(0, ${height})`)
    //   .call(makeXLines()
    //     .tickSize(-height, 0, 0)
    //     .tickFormat('')
    //   )

    chart.append('g')
      .attr('class', 'grid')
      .call(makeYLines()
        .tickSize(-width, 0, 0)
        .tickFormat('')
      )

    const barGroups = chart.selectAll()
      .data(sample)
      .enter()
      .append('g')

    barGroups
      .append('rect')
      .attr('class', 'bar')
      .attr('x', (g) => xScale(g.language))
      .attr('y', (g) => yScale(g.value))
      .attr('height', (g) => height - yScale(g.value))
      .attr('width', xScale.bandwidth())
      .on('mouseenter', function (actual, i) {
        d3.selectAll('.value')
          .attr('opacity', 0)

        d3.select(this)
          .transition()
          .duration(300)
          .attr('opacity', 0.6)
          .attr('x', (a) => xScale(a.language) - 5)
          .attr('width', xScale.bandwidth() + 10)

        const y = yScale(actual.value)

        line = chart.append('line')
          .attr('id', 'limit')
          .attr('x1', 0)
          .attr('y1', y)
          .attr('x2', width)
          .attr('y2', y)

        barGroups.append('text')
          .attr('class', 'divergence')
          .attr('x', (a) => xScale(a.language) + xScale.bandwidth() / 2)
          .attr('y', (a) => yScale(a.value) + 30)
          .attr('fill', 'white')
          .attr('text-anchor', 'middle')
          .text((a, idx) => {
            const divergence = (a.value - actual.value).toFixed(1)
            
            let text = ''
            if (divergence > 0) text += '+'
            text += `${divergence}%`

            return idx !== i ? text : '';
          })

      })
      .on('mouseleave', function () {
        d3.selectAll('.value')
          .attr('opacity', 1)

        d3.select(this)
          .transition()
          .duration(300)
          .attr('opacity', 1)
          .attr('x', (a) => xScale(a.language))
          .attr('width', xScale.bandwidth())

        chart.selectAll('#limit').remove()
        chart.selectAll('.divergence').remove()
      })

    barGroups 
      .append('text')
      .attr('class', 'value')
      .attr('x', (a) => xScale(a.language) + xScale.bandwidth() / 2)
      .attr('y', (a) => yScale(a.value) + 30)
      .attr('text-anchor', 'middle')
      .text((a) => `${a.value}%`)
    
    svg
      .append('text')
      .attr('class', 'label')
      .attr('x', -(height / 2) - margin)
      .attr('y', margin / 2.4)
      .attr('transform', 'rotate(-90)')
      .attr('text-anchor', 'middle')
      .text('Love meter (%)')

    svg.append('text')
      .attr('class', 'label')
      .attr('x', width / 2 + margin)
      .attr('y', height + margin * 1.7)
      .attr('text-anchor', 'middle')
      .text('Languages')

    svg.append('text')
      .attr('class', 'title')
      .attr('x', width / 2 + margin)
      .attr('y', 40)
      .attr('text-anchor', 'middle')
      .text('Most loved programming languages in 2018')

    svg.append('text')
      .attr('class', 'source')
      .attr('x', width - margin / 2)
      .attr('y', height + margin * 1.7)
      .attr('text-anchor', 'start')
      .text('Source: Stack Overflow, 2018')
  
  //bar graph
//   var graph = svg.append("g")
//   graph.selectAll()
// //     .data(userData.sort(function(a,b) {
// //             return a.date - b.date;
// //           }))
//     .append("rect")
//     .data(userData)
//     .enter()
//     .join("rect")
//     .attr("fill", function(d) {
//       if(d.quadrant == 1)
//         return "#B459DE";
//       if(d.quadrant == 2)
//         return "#61ECDB";
//       if(d.quadrant == 3)
//         return "#3372D2";
//       if(d.quadrant == 4)
//         return "#FD3A3E";
//       if(d.quadrant == 5)
//         return "#E0BCF0";
//       if(d.quadrant == 6)
//         return "#B6F6EE";
//       if(d.quadrant == 7)
//         return "#B0C8ED";
//       if(d.quadrant == 8)
//         return "#FED2D2";
//       if(d.quadrant == 9)
//         return "white";
//     })
//     .attr("x", (d, i) => x(i))
//     .attr("y", d => ((y(d.frequency * 2) + height) / 5) + 100)
//     .attr("height", d => (y(0) - y(d.frequency)) * 0.8)
//     .attr("width", x.bandwidth() + 1)
  
    //hover capabilities
//     .on("mouseover", function(d, i) {
// 			d3.select(this)
//     .attr("opacity", "25%");
//       var xpos = 0;
//       var ypos = 0;
//       var tgrp = svg.append("g")
//         .attr("id", "tooltip")
//         tgrp.append("rect")
//           .attr("width", "249px")
//           .attr("height", "90%")
//           .attr("fill", "#34383A")
    
//         //title
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 50)
//           .attr("class", "title")
//           .text("Mood Waves")
    
//           //circle chart
//           var pie = d3.pie()
//           var circ = pie([1,1,1,1])
//           var arcOut = d3.arc()
//             .innerRadius(25)
//             .outerRadius(50)

//           var arcIn = d3.arc()
//             .innerRadius(3)
//             .outerRadius(25)

//           var colorScaleOut = ["#B459DE","#61ECDB","#3372D2","#FD3A3E"]
//           var colorScaleIn = ["#E0BCF0","#B6F6EE","#B0C8ED","#FED2D2"]

//           tgrp.append("circle")
//             .attr("cx", 100)
//             .attr("cy", 145)
//             .attr("r", 3)
//             .attr("fill", "white")

//           tgrp.selectAll("path")
//             .data(circ)
//             .enter()
//             .append("path")
//             .attr("transform", "translate(100,145)")
//             .attr("d", arcIn)
//             .attr("fill", function(d) {
//               return colorScaleIn[d.index];
//             })
//           tgrp.selectAll("path2")
//             .data(circ)
//             .enter()
//             .append("path")
//             .attr("transform", "translate(100,145)")
//             .attr("d", arcOut)
//             .attr("fill", function(d) {
//               return colorScaleOut[d.index];
//             })
    
//         //details
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 250)
//           .attr("class", "heading")
//           .text(`${d3.timeFormat('%b %d, %Y')(i.date)}`)
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 270)
//           .attr("class", "body")
//           .text("You listened to " + `${i.frequency}` + " songs.")
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 300)
//           .attr("class", "heading")
//           .text("top songs")
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 325)
//           .attr("class", "heading")
//           .text(function() {
//             if(i.topsongs[0].name.length <= 25) {
//               return `${i.topsongs[0].name}`;
//             } else {
//               return `${i.topsongs[0].name}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 340)
//           .attr("class", "body")
//           .text(function() {
//             if(i.topsongs[0].singer.length <= 25) {
//               return `${i.topsongs[0].singer}`;
//             } else {
//               return `${i.topsongs[0].singer}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 365)
//           .attr("class", "heading")
//           .text(function() {
//             if(i.topsongs[1].name.length < 25) {
//               return `${i.topsongs[1].name}`;
//             } else {
//               return `${i.topsongs[1].name}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 380)
//           .attr("class", "body")
//           .text(function() {
//             if(i.topsongs[1].singer.length <= 25) {
//               return `${i.topsongs[1].singer}`;
//             } else {
//               return `${i.topsongs[1].singer}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 405)
//           .attr("class", "heading")
//           .text(function() {
//             if(i.topsongs[2].name.length < 25) {
//               return `${i.topsongs[2].name}`;
//             } else {
//               return `${i.topsongs[2].name}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 420)
//           .attr("class", "body")
//           .text(function() {
//             if(i.topsongs[2].singer.length <= 25) {
//               return `${i.topsongs[2].singer}`;
//             } else {
//               return `${i.topsongs[2].singer}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 445)
//           .attr("class", "heading")
//           .text(function() {
//             if(i.topsongs[3].name.length < 25) {
//               return `${i.topsongs[3].name}`;
//             } else {
//               return `${i.topsongs[3].name}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 460)
//           .attr("class", "body")
//           .text(function() {
//             if(i.topsongs[3].singer.length <= 25) {
//               return `${i.topsongs[3].singer}`;
//             } else {
//               return `${i.topsongs[3].singer}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 485)
//           .attr("class", "heading")
//           .text(function() {
//             if(i.topsongs[4].name.length < 25) {
//               return `${i.topsongs[4].name}`;
//             } else {
//               return `${i.topsongs[4].name}`.slice(0,22) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 65)
//           .attr("y", 500)
//           .attr("class", "body")
//           .text(function() {
//             if(i.topsongs[4].singer.length <= 25) {
//               return `${i.topsongs[4].singer}`;
//             } else {
//               return `${i.topsongs[4].singer}`.slice(0,22) + "...";
//           }})
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 530)
//           .attr("class", "heading")
//           .text("mood")
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 550)
//           .attr("class", "body")
//           .text(function() {
//              if(i.keywords == null) {
//               return "____";
//             } else if(i.keywords.length <= 30) {
//               return `${i.keywords}`;
//             } else {
//               return `${i.keywords}`.slice(0,30) + "...";
//             }})
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 580)
//           .attr("class", "heading")
//           .text("reflections")
//         tgrp.append("text")
//           .attr("x", 25)
//           .attr("y", 600)
//           .attr("class", "body")
//           .text(function() {
//             if(i.reflections == null) {
//               return "____";
//             } else {
//               return `${i.reflections}`;
//           }})
//           .attr("dy", 0)
//           .call(wrap, x.bandwidth());
// 			})
// 			.on("mouseout", function(d) {
// 			  d3.select(this)
// 			  .transition().duration(250)
// 			  .attr("opacity", "100%");
// 			  d3.select("#tooltip").remove();
// 			});

//   //x axis formatting
//   var temp = []
//   var axis = svg.append("g")
//     axis.call(xAxis)
//     .selectAll(".tick text")
//     .attr("fill", "white")
//     .data(dataset)
//     .each(function(d) {
//       if (temp[d3.timeFormat('%B')(d.date)] == undefined) {
//         temp[d3.timeFormat('%B')(d.date)] = 1;
//         return d3.timeFormat('%B')(d.date);
//       } else {
//         return d3.select(this).remove();
//       }
//     })

function wrap(text) {
  text.each(function() {
    var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        lineHeight = 1.1, // ems
        y = text.attr("y"),
        dy = parseFloat(text.attr("dy")),
        tspan = text.text(null).append("tspan").attr("x", 25).attr("y", y).attr("dy", dy + "em");
    while (word = words.pop()) {
      line.push(word);
      tspan.text(line.join(" "));
      if (tspan.node().getComputedTextLength() > 200) {
        line.pop();
        tspan.text(line.join(" "));
        line = [word];
        tspan = text.append("tspan").attr("x", 25).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word);
      }
    }
  });
}
	
function classifyQuadrant(x, y) {
  if (x >= 0 && y > 0){
    if (innerQuad(x,y)){
      return 5;
    } else {
      return 1;
    }
  }
  else if (x > 0 && y <= 0){
    if (innerQuad(x,y)){
      return 6;
    } else {
      return 2;
    }
  }
  else if (x <= 0 && y < 0){
    if (innerQuad(x,y)){
      return 7;
    } else {
      return 3;
    }
  }
  else if (x < 0 && y >= 0){
    if (innerQuad(x,y)){
      return 8;
    } else {
      return 4;
    }
  }
  else {
    return 9;
  }
}
	
function innerQuad(x, y) {
  return Math.sqrt(x*x + y*y) < 3;
}
	
</script>
